<div id="control-panel" class="control-panel">

  <img src="chrome-extension://__MSG_@@extension_id__/images/icons/settings.svg"
       class="control-panel-settings-button"
       click="showSettings">

  <div class="control-panel-area" id="settings-area">
    <h3 class="settings-area-header">
      Settings <span class="settings-area-help-link" click="showHelp">Help</span>
    </h3>
    <form id="settings-form">
      <fieldset class="settings-area-field">
        <div class="settings-area-label">
          <label for="save-filename">
            Filename when saving:
          </label>
        </div>
        <div class="settings-area-control">
          <input type="text" id="save-filename"
                 class="settings-area-input" placeholder="Filename">
        </div>
      </fieldset>
      <fieldset class="settings-area-field">
        <div class="settings-area-label">
          <label for="include-selector">
            Include elements matching:
          </label>
        </div>
        <div class="settings-area-control">
          <input type="text" id="include-selector"
                 class="settings-area-input" placeholder="CSS Selector">
        </div>
      </fieldset>
      <fieldset class="settings-area-field">
        <div class="settings-area-label">
          <label for="exclude-selector">
            Exclude elements matching:
          </label>
        </div>
        <div class="settings-area-control">
          <input type="text" id="exclude-selector"
                 class="settings-area-input" placeholder="CSS Selector">
        </div>
      </fieldset>
      <fieldset class="settings-area-field">
        <div class="settings-area-label">
          <label for="tab-style">
            Tab style:
          </label>
        </div>
        <div class="settings-area-control">
          <select id="tab-style">
            <option value="tab">Tab</option>
            <option value="two">Two Spaces</option>
            <option value="four">Four Spaces</option>
          </select>
        </div>
      </fieldset>
      <fieldset class="settings-area-field">
        <div class="settings-area-label">
          <label for="output-selector">
            Output selector:
          </label>
        </div>
        <div class="settings-area-control">
          <select id="output-selector">
            <option value="auto">Auto</option>
            <option value="none">None</option>
            <option value="id">Id</option>
            <option value="first">First Class</option>
            <option value="longest">Longest Class</option>
            <option value="all">All Classes</option>
            <option value="tag">Tag</option>
            <option value="tag-nth">Tag:nth-child</option>
          </select>
          <div class="output-selector-description">
            <div class="select-linked-area" data-linked-option="auto">
              <p>Element id or first class will be used</p>
              <code>#id | .first { ... }</code>
            </div>
            <div class="select-linked-area" data-linked-option="none">
              <p>No selector used. Styles will be inline.</p>
              <code>width: 200px; height: 200px;...</code>
            </div>
            <div class="select-linked-area" data-linked-option="id">
              <p>Element id will be used</p>
              <code>#id { ... }</code>
            </div>
            <div class="select-linked-area" data-linked-option="first">
              <p>First class name found will be used</p>
              <code>.first { ... }</code>
            </div>
            <div class="select-linked-area" data-linked-option="longest">
              <p>Longest class name found will be used</p>
              <code>.long-class-name { ... }</code>
            </div>
            <div class="select-linked-area" data-linked-option="all">
              <p>All class names will be output together</p>
              <code>.one.two.three { ... }</code>
            </div>
            <div class="select-linked-area" data-linked-option="tag">
              <p>Only the tag name will be output</p>
              <code>section { ... }</code>
            </div>
            <div class="select-linked-area" data-linked-option="tag-nth">
              <p>The tag name + tag's nth-child selector will be output</p>
              <code>li:nth-child(3) { ... }</code>
            </div>
          </div>
        </div>
      </fieldset>
      <fieldset class="settings-area-field">
        <div class="settings-area-label">
          <label for="output-changed-only">
            Only output changed styles:
          </label>
        </div>
        <div class="settings-area-control">
          <input type="checkbox" id="output-changed-only">
        </div>
      </fieldset>
      <fieldset class="settings-area-field">
        <div class="settings-area-label">
          <label for="output-unique-only">
            Exclude styles common to a group:
          </label>
        </div>
        <div class="settings-area-control">
          <input type="checkbox" id="output-unique-only">
        </div>
      </fieldset>
      <button type="reset" class="settings-reset">Clear All</button>
      <button type="submit" class="settings-save">Save</button>
    </form>
  </div>
  <div class="control-panel-area" id="help-area">

    <div class="help-area-block help-area-block--keyboard">

      <h3 class="help-area-header">Keyboard</h3>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">
            <img src="chrome-extension://__MSG_@@extension_id__/images/icons/arrow-key.svg"
                 class="help-area-arrow-key-icon">
          </span>
        </div>
        <p class="help-area-text">Use the arrow keys to nudge the element.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">&#x21e7;</span>
        </div>
        <p class="help-area-text">Shift: Constrain dragging / nudge multiplier / select multiple.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">&#x2303;</span>
        </div>
        <p class="help-area-text">Ctrl: Move the background image when dragging.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">&#x2325;</span>
        </div>
        <p class="help-area-text">Option/Alt: Peek at the background image.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">&#x2318;</span>
        </div>
        <p class="help-area-text">Cmd/Win: While dragging, temporarily move a single element.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">b</span>
        </div>
        <p class="help-area-text">Background position nudge mode.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">s</span>
        </div>
        <p class="help-area-text">Size nudge mode.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">m</span>
        </div>
        <p class="help-area-text">Move (position) nudge mode.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">r</span>
        </div>
        <p class="help-area-text">Rotation nudge mode.</p>
      </div>

      <div class="help-area-item">
        <div class="help-area-graphic">
          <span class="key-icon key-icon--large">z</span>
        </div>
        <p class="help-area-text">Z-index nudge mode.</p>
      </div>

    </div>

    <div class="help-area-block help-area-block--mouse">
      <h3 class="help-area-header">Mouse</h3>
      <div class="help-area-item">
        <span class="help-area-graphic help-area-graphic--solid">
          <img src="chrome-extension://__MSG_@@extension_id__/images/icons/position.svg"
               class="help-area-position-icon">
        </span>
        <p class="help-area-text">Drag the middle of the element to move it around.</p>
      </div>
      <div class="help-area-item">
        <span class="help-area-graphic help-area-graphic--solid">
          <span class="help-area-resize-icon help-area-resize-icon--nw"></span>
          <span class="help-area-resize-icon help-area-resize-icon--n"></span>
          <span class="help-area-resize-icon help-area-resize-icon--ne"></span>
          <span class="help-area-resize-icon help-area-resize-icon--e"></span>
          <span class="help-area-resize-icon help-area-resize-icon--se"></span>
          <span class="help-area-resize-icon help-area-resize-icon--s"></span>
          <span class="help-area-resize-icon help-area-resize-icon--sw"></span>
          <span class="help-area-resize-icon help-area-resize-icon--w"></span>
        </span>
        <p class="help-area-text">Drag border handles to resize.</p>
      </div>
      <div class="help-area-item help-area-item--lower">
        <span class="help-area-graphic help-area-graphic--solid">
          <span class="help-area-rotate-handle"></span>
        </span>
        <p class="help-area-text">Drag the rotate handle to rotate.</p>
      </div>
      <div class="help-area-item">
        <span class="help-area-graphic help-area-graphic--solid">
          <img src="chrome-extension://__MSG_@@extension_id__/images/icons/background.svg"
               class="help-area-snap-background-icon">
          <img src="chrome-extension://__MSG_@@extension_id__/images/icons/pointer.svg"
               class="help-area-snap-pointer-icon">
        </span>
        <p class="help-area-text">Double click to snap element dimensions to a background sprite.</p>
      </div>
      <div class="help-area-item">
        <span class="help-area-graphic help-area-graphic--dashed">
          <span class="help-area-drag-box--one"></span>
          <span class="help-area-drag-box--two"></span>
          <img src="chrome-extension://__MSG_@@extension_id__/images/icons/pointer.svg"
               class="help-area-drag-pointer-icon">
        </span>
        <p class="help-area-text">Drag to select multiple elements.</p>
      </div>
    </div>
    <div class="help-area-block help-area-block--commands">
      <h3 class="help-area-header">Commands</h3>
      <p class="help-area-item">
        <span class="help-area-key-combo">
          <span class="key-icon key-icon--large">⌘</span>
          <span class="">+</span>
          <span class="key-icon key-icon--large">z</span>
        </span>
        <span class="help-area-text">Undo</span>
      </p>
      <p class="help-area-item">
        <span class="help-area-key-combo">
          <span class="key-icon key-icon--large">⌘</span>
          <span class="">+</span>
          <span class="key-icon key-icon--large">a</span>
        </span>
        <span class="help-area-text">Select All</span>
      </p>
      <p class="help-area-item">
        <span class="help-area-key-combo">
          <span class="key-icon key-icon--large">⌘</span>
          <span class="">+</span>
          <span class="key-icon key-icon--large">c</span>
        </span>
        <span class="help-area-text">Copy Styles</span>
      </p>
      <span class="help-area-item">
        <span class="help-area-key-combo">
          <span class="key-icon key-icon--large">⌘</span>
          <span class="">+</span>
          <span class="key-icon key-icon--large">s</span>
        </span>
        <span class="help-area-text">Save Styles</span>
      </span>
    </div>
  </div>

  <div class="control-panel-area" id="element-area">
    ELEMENT AREA
  </div>

  <div class="control-panel-area" id="default-area">
    <img class="default-area-icon" src="chrome-extension://__MSG_@@extension_id__/images/icons/pointer.svg">
    <p class="default-area-text">Select Element</p>
  </div>

  <div class="control-panel-area" id="getting-started-area">

    <div class="getting-started-block getting-started-block--mouse">
      <img class="getting-started-image" src="chrome-extension://__MSG_@@extension_id__/images/icons/mouse.svg">
      <p>Use the mouse to drag, resize, and rotate elements.</p>
    </div>

    <div class="getting-started-block getting-started-block--keyboard">
      <img class="getting-started-image" src="chrome-extension://__MSG_@@extension_id__/images/icons/keyboard.svg">
      <p>Arrow keys nudge elements.<br>
        <span class="key-icon">b</span>
        <span class="key-icon">s</span>
        <span class="key-icon">m</span>
        change nudge modes.</p>
    </div>

    <div class="getting-started-block getting-started-block--background">
      <img class="getting-started-image" src="chrome-extension://__MSG_@@extension_id__/images/icons/background.svg">
      <p>Double click on a background image to fit sprite dimensions.</p>
    </div>

    <div class="getting-started-block getting-started-block--output">
      <img class="getting-started-image" src="chrome-extension://__MSG_@@extension_id__/images/icons/download.svg">
      <p>
        <span class="key-icon">⌘</span>
        <span class="key-icon">c</span>
        Copy styles to clipboard<br>

        <span class="key-icon">⌘</span>
        <span class="key-icon">s</span>
        Save styles to disk
      </p>
    </div>

    <div class="vertical-line"></div>
    <div class="horizontal-line"></div>

    <span class="getting-started-skip" click="skipGettingStarted">Don't Show</span>
  </div>
</div>

<div id="drag-selection" class="drag-selection">
  <div class="drag-selection-border drag-selection-top"></div>
  <div class="drag-selection-border drag-selection-right"></div>
  <div class="drag-selection-border drag-selection-bottom"></div>
  <div class="drag-selection-border drag-selection-left"></div>
</div>

<div id="loading-animation" class="loading-animation">
    <div class="loading-graphic">
      <div class="loading-spin">
        <div class="loading-bar loading-bar-1"></div>
        <div class="loading-bar loading-bar-2"></div>
        <div class="loading-bar loading-bar-3"></div>
        <div class="loading-bar loading-bar-4"></div>
        <div class="loading-bar loading-bar-5"></div>
        <div class="loading-bar loading-bar-6"></div>
        <div class="loading-bar loading-bar-7"></div>
        <div class="loading-bar loading-bar-8"></div>
        <div class="loading-bar loading-bar-9"></div>
        <div class="loading-bar loading-bar-10"></div>
        <div class="loading-bar loading-bar-11"></div>
        <div class="loading-bar loading-bar-12"></div>
      </div>
    </div>
    <div class="loading-shade"></div>
</div>



<!--
  StatusBar.prototype.buildHelpBox = function(el, name, fn) {
    var help = new Element(el, 'div', 'help ' + name + '-help');
    var box  = new Element(help.el, 'div', 'help-box ' + name + '-help-box');
    var text = new Element(help.el, 'div', 'help-text ' + name + '-help-text');
    fn.call(this, box, text);
  };

  StatusBar.prototype.buildHelpArea = function(area) {


    // Keyboard help area

    var keyboardHelp = this.buildHelpBlock('keys', 'Keyboard');

    this.buildHelpBox(keyboardHelp.el, 'arrow', function(box, text) {
      var box = new Element(box.el, 'div', 'key-icon');
      new IconElement(box.el, StatusBar.ARROW_KEY_ICON, 'arrow-key-icon');
      text.html('Use the arrow keys to nudge the element.');
    });

    this.buildHelpBox(keyboardHelp.el, 'shift', function(box, text) {
      new Element(box.el, 'div', 'key-icon shift-key-icon').html(StatusBar.SHIFT);
      text.html('Shift: Constrain dragging / nudge multiplier / select multiple.');
    });

    this.buildHelpBox(keyboardHelp.el, 'ctrl', function(box, text) {
      new Element(box.el, 'div', 'key-icon ctrl-key-icon').html(StatusBar.CTRL);
      text.html('Ctrl: Move the background image when dragging.');
    });

    this.buildHelpBox(keyboardHelp.el, 'alt', function(box, text) {
      new Element(box.el, 'div', 'key-icon alt-key-icon').html(StatusBar.OPTION);
      text.html('Option/Alt: Peek at the background image.');
    });

    this.buildHelpBox(keyboardHelp.el, 'cmd', function(box, text) {
      new Element(box.el, 'div', 'key-icon alt-key-icon').html(StatusBar.COMMAND);
      text.html('Cmd/Win: While dragging, temporarily move a single element.');
    });

    this.buildHelpBox(keyboardHelp.el, 'b', function(box, text) {
      new Element(box.el, 'div', 'key-icon alt-key-icon letter-key-icon').html('b');
      text.html('Toggle background image nudge.');
    });

    this.buildHelpBox(keyboardHelp.el, 's', function(box, text) {
      new Element(box.el, 'div', 'key-icon alt-key-icon letter-key-icon').html('s');
      text.html('Toggle size nudge.');
    });

    this.buildHelpBox(keyboardHelp.el, 'm', function(box, text) {
      new Element(box.el, 'div', 'key-icon alt-key-icon letter-key-icon').html('m');
      text.html('Toggle position (move) nudge.');
    });

    this.buildHelpBox(keyboardHelp.el, 'z', function(box, text) {
      new Element(box.el, 'div', 'key-icon alt-key-icon letter-key-icon').html('z');
      text.html('Toggle z-index nudge.');
    });


    // Mouse help area

    var mouseHelp = this.buildHelpBlock('mouse', 'Mouse');

    this.buildHelpBox(mouseHelp.el, 'resize', function(box, text) {
      new Element(box.el, 'div', 'help-element');
      new Element(box.el, 'div', 'resize-help-icon resize-nw-help-icon');
      new Element(box.el, 'div', 'resize-help-icon resize-n-help-icon');
      new Element(box.el, 'div', 'resize-help-icon resize-ne-help-icon');
      new Element(box.el, 'div', 'resize-help-icon resize-e-help-icon');
      new Element(box.el, 'div', 'resize-help-icon resize-se-help-icon');
      new Element(box.el, 'div', 'resize-help-icon resize-s-help-icon');
      new Element(box.el, 'div', 'resize-help-icon resize-sw-help-icon');
      new Element(box.el, 'div', 'resize-help-icon resize-w-help-icon');
      text.html('Drag border handles to resize.');
    });

    this.buildHelpBox(mouseHelp.el, 'rotate', function(box, text) {
      new Element(box.el, 'div', 'help-element');
      new Element(box.el, 'div', 'rotate-handle');
      text.html('Drag the rotate handle to rotate the element.');
    });

    this.buildHelpBox(mouseHelp.el, 'snapping', function(box, text) {
      new Element(box.el, 'div', 'help-element');
      new IconElement(box.el, StatusBar.BG_IMAGE_ICON, 'help-icon snapping-help-icon');
      new IconElement(box.el, StatusBar.POINTER_ICON, 'help-icon snapping-help-pointer-icon');
      text.html('Double click to snap element dimensions to a background sprite.');
    });

    this.buildHelpBox(mouseHelp.el, 'aligning', function(box, text) {
      new Element(box.el, 'div', 'help-element multiple-select-help');
      new IconElement(box.el, StatusBar.POINTER_ICON, 'help-icon aligning-pointer-icon');
      new Element(box.el, 'div', 'icon help-icon aligning-box-one');
      new Element(box.el, 'div', 'icon help-icon aligning-box-two');
      text.html('Drag to select multiple elements.');
    });


    // Command help area

    var commandHelp = this.buildHelpBlock('command', 'Commands');

    this.buildHelpBox(commandHelp.el, 'undo', function(box, text) {
      box.addClass('command-help-box');
      new Element(box.el, 'div', 'key-icon alt-key-icon').html(this.getCommandKey());
      new Element(box.el, 'span', 'key-plus').html('+');
      new Element(box.el, 'div', 'key-icon alt-key-icon letter-key-icon').html('z');
      text.html('Undo');
    });

    this.buildHelpBox(commandHelp.el, 'select-all', function(box, text) {
      box.addClass('command-help-box');
      new Element(box.el, 'div', 'key-icon alt-key-icon').html(this.getCommandKey());
      new Element(box.el, 'span', 'key-plus').html('+');
      new Element(box.el, 'div', 'key-icon alt-key-icon letter-key-icon').html('a');
      text.html('Select All');
    });

    this.buildHelpBox(commandHelp.el, 'copy', function(box, text) {
      box.addClass('command-help-box');
      new Element(box.el, 'div', 'key-icon alt-key-icon').html(this.getCommandKey());
      new Element(box.el, 'span', 'key-plus').html('+');
      new Element(box.el, 'div', 'key-icon alt-key-icon letter-key-icon').html('c');
      text.html('Copy Styles');
    });

    this.buildHelpBox(commandHelp.el, 'save', function(box, text) {
      box.addClass('command-help-box');
      new Element(box.el, 'div', 'key-icon alt-key-icon').html(this.getCommandKey());
      new Element(box.el, 'span', 'key-plus').html('+');
      new Element(box.el, 'div', 'key-icon alt-key-icon letter-key-icon').html('s');
      text.html('Save Styles');
    });

  };

  StatusBar.prototype.build = function() {
    this.el = new Element(document.body, 'div', 'status-bar').el;
    this.areas = [];
    this.inputs = [];

    this.buildArea('Help');
    this.buildArea('Start');
    this.buildArea('Element');
    this.buildArea('Settings');
    this.buildArea('QuickStart');

    this.createState('position', 'Move', StatusBar.POSITION_ICON);
    this.createState('resize', 'Resize', StatusBar.RESIZE_ICON);
    this.createState('resize-nw', 'Resize', StatusBar.RESIZE_NW_ICON);
    this.createState('resize-se', 'Resize', StatusBar.RESIZE_SE_ICON);
    this.createState('background-position', 'Background', StatusBar.BG_IMAGE_ICON);
    this.createState('z-index', 'Z-Index', StatusBar.Z_INDEX_ICON);
    this.createState('rotate', 'Rotate', StatusBar.ROTATE_ICON);

    this.buildButton(StatusBar.SETTINGS_ICON, this.settingsArea);
    this.addEventListener('dblclick', this.resetPosition.bind(this));

    this.defaultArea = this.getStartArea();
    this.resetArea();
  };

  StatusBar.prototype.buildButton = function(iconId, area) {
    var button = new IconElement(this.el, iconId, area.name + '-button');
    button.addEventListener('click', this.toggleArea.bind(this, area));
  };

  StatusBar.prototype.buildArea = function(upper) {
    var camel = upper.slice(0, 1).toLowerCase() + upper.slice(1);
    var lower = upper.toLowerCase();
    var area = new Element(this.el, 'div', 'area '+ lower +'-area');
    area.name = lower;
    this[camel + 'Area'] = area;
    this.areas.push(area);
    this['build' + upper + 'Area'](area);
  };

  StatusBar.prototype.buildStartArea = function(area) {
    this.buildStartBlock('mouse', function(block) {
      new IconElement(block.el, StatusBar.MOUSE_ICON, 'start-icon');
      new Element(block.el, 'div', 'start-help-text').html('Use the mouse to drag, resize, and rotate elements.');
    });

    this.buildStartBlock('keyboard', function(block) {
      var bKey = this.buildInlineKeyIcon('b');
      var sKey = this.buildInlineKeyIcon('s');
      var mKey = this.buildInlineKeyIcon('m');
      var text = 'Arrow keys nudge elements.<br>'+ bKey + sKey + mKey +' change nudge modes.';

      new IconElement(block.el, StatusBar.KEYBOARD_ICON, 'start-icon');
      new Element(block.el, 'div', 'start-help-text').html(text);

    });

    this.buildStartBlock('sprites', function(block) {
      new IconElement(block.el, StatusBar.BG_IMAGE_ICON, 'start-icon');
      new Element(block.el, 'div', 'start-help-text').html('Double click on a background image to fit sprite dimensions.');
    });

    this.buildStartBlock('output', function(block) {

      var cmdKey = this.buildInlineKeyIcon(this.getCommandKey());
      var cKey = this.buildInlineKeyIcon('c');
      var sKey = this.buildInlineKeyIcon('s');
      var text = cmdKey + cKey + ' Copy styles to clipboard<br>' + cmdKey + sKey +' Save styles to disk';

      new IconElement(block.el, StatusBar.DOWNLOAD_ICON, 'start-icon');
      new Element(block.el, 'div', 'start-help-text start-help-text-left').html(text);
    });

    new Element(this.startArea.el, 'div', 'start-horizontal-line');
    new Element(this.startArea.el, 'div', 'start-vertical-line');

    var hide = new Element(this.startArea.el, 'span', 'start-hide-link').html("Don't Show");
    hide.addEventListener('click', this.skipStartArea.bind(this));
  };

  StatusBar.prototype.buildStartBlock = function(type, fn) {
    var block = new Element(this.startArea.el, 'div', 'start-help');
    fn.call(this, block);
  };

  StatusBar.prototype.buildInlineKeyIcon = function(key) {
    var classes = ['', 'icon', 'key-icon', 'letter-key-icon', 'inline-key-icon'];
    return '<span class="' + classes.join(' ' + EXTENSION_CLASS_PREFIX) + '">'+ key +'</span>';
  };

  StatusBar.prototype.buildQuickStartArea = function(area) {
    new IconElement(area.el, StatusBar.POINTER_ICON, 'quickstart-icon');
    new Element(area.el, 'div', 'quickstart-text').html('Select Element');
  };


  StatusBar.prototype.buildHelpBlock = function(name, header) {
    var block = new Element(this.helpArea.el, 'div', 'help-block '+ name +'-help-block');
    if (header) {
      new Element(block.el, 'h4', 'help-block-header').html(header);
    }
    return block;
  };

  StatusBar.prototype.buildHelpBox = function(el, name, fn) {
    var help = new Element(el, 'div', 'help ' + name + '-help');
    var box  = new Element(help.el, 'div', 'help-box ' + name + '-help-box');
    var text = new Element(help.el, 'div', 'help-text ' + name + '-help-text');
    fn.call(this, box, text);
  };

  StatusBar.prototype.buildElementArea = function(area) {

    this.singleElementArea = new Element(area.el, 'div', 'single-element-area');
    this.elementHeader     = new Element(this.singleElementArea.el, 'h3', 'single-header');
    this.elementData       = new Element(this.singleElementArea.el, 'div', 'single-data');

    this.multipleElementArea   = new Element(area.el, 'div', 'multiple-element-area');
    this.multipleElementHeader = new Element(this.multipleElementArea.el, 'h3', 'multiple-header');
    this.buildAlignActions(area);

    this.elementStates  = new Element(area.el, 'div', 'element-states');
    this.stateIcons = [];
  };

  StatusBar.prototype.buildAlignActions = function(area) {
    this.elementActions = new Element(this.multipleElementArea.el, 'div', 'element-actions');

    this.alignTop        = this.buildElementAlign('top', StatusBar.ALIGN_TOP_ICON, 'Align top edge');
    this.alignHorizontal = this.buildElementAlign('horizontal', StatusBar.ALIGN_HORIZONTAL_ICON, 'Align horizontal center');
    this.alignBottom     = this.buildElementAlign('bottom', StatusBar.ALIGN_BOTTOM_ICON, 'Align bottom edge');
    this.alignLeft       = this.buildElementAlign('left', StatusBar.ALIGN_LEFT_ICON, 'Align left edge');
    this.alignVertical   = this.buildElementAlign('vertical', StatusBar.ALIGN_VERTICAL_ICON, 'Align vertical center');
    this.alignRight      = this.buildElementAlign('right', StatusBar.ALIGN_RIGHT_ICON, 'Align right edge');

    this.distributeTop        = this.buildElementDistribute('top', StatusBar.DISTRIBUTE_TOP_ICON, 'Distribute top edge');
    this.distributeHorizontal = this.buildElementDistribute('horizontal', StatusBar.DISTRIBUTE_HORIZONTAL_ICON, 'Distribute horizontal center');
    this.distributeBottom     = this.buildElementDistribute('bottom', StatusBar.DISTRIBUTE_BOTTOM_ICON, 'Distribute bottom edge');
    this.distributeLeft       = this.buildElementDistribute('left', StatusBar.DISTRIBUTE_LEFT_ICON, 'Distribute left edge');
    this.distributeVertical   = this.buildElementDistribute('vertical', StatusBar.DISTRIBUTE_VERTICAL_ICON, 'Distribute vertical center');
    this.distributeRight      = this.buildElementDistribute('right', StatusBar.DISTRIBUTE_RIGHT_ICON, 'Distribute right edge');

  };

  StatusBar.prototype.buildElementAlign = function(type, iconId, title) {
    var method = type === 'horizontal' || type === 'vertical' ? 'alignMiddle' : 'alignFocused';
    var action = new IconElement(this.elementActions.el, iconId, 'element-action');
    action.el.title = title;
    action.addEventListener('click', this.delegateElementAction(method, type));
  };

  StatusBar.prototype.buildElementDistribute = function(type, iconId, title) {
    var action = new IconElement(this.elementActions.el, iconId, 'element-action');
    action.el.title = title;
    action.addEventListener('click', this.delegateElementAction('alignFocused', type, true));
  };

  StatusBar.prototype.buildSettingsArea = function(area) {

    var header = new Element(this.settingsArea.el, 'h4', 'settings-header').html('Settings');

    this.buildTextField(area, Settings.DOWNLOAD_FILENAME, 'Filename when saving:', 'filename');
    this.buildTextField(area, Settings.EXCLUDE_ELEMENTS, 'Exclude elements matching:', 'CSS Selector');
    this.buildTextField(area, Settings.INCLUDE_ELEMENTS, 'Include elements matching:', 'CSS Selector');

    this.buildSelect(area, Settings.TABS, 'Tab style:', [
      [Settings.TABS_TAB, 'Tab'],
      [Settings.TABS_TWO_SPACES, 'Two Spaces'],
      [Settings.TABS_FOUR_SPACES, 'Four Spaces']
    ]);

    this.buildSelect(area, Settings.SELECTOR, 'Output Selector:', [
      [Settings.SELECTOR_AUTO, 'Auto', 'Element id or first class will be used', '#id | .first { ... }'],
      [Settings.SELECTOR_NONE, 'None', 'No selector used. Styles will be inline.', 'width: 200px; height: 200px;...'],
      [Settings.SELECTOR_ID, 'Id', 'Element id will be used', '#id { ... }'],
      [Settings.SELECTOR_FIRST, 'First Class', 'First class name found will be used', '.first { ... }'],
      [Settings.SELECTOR_LONGEST, 'Longest Class', 'Longest class name found will be used', '.long-class-name { ... }'],
      [Settings.SELECTOR_ALL, 'All Classes', 'All class names will be output together', '.one.two.three { ... }'],
      [Settings.SELECTOR_TAG, 'Tag', 'Only the tag name will be output', 'section { ... }'],
      [Settings.SELECTOR_TAG_NTH, 'Tag:nth-child', 'The tag name + tag\'s nth-child selector will be output', 'li:nth-child(3) { ... }'],
    ]);

    this.buildCheckboxField(area, Settings.OUTPUT_CHANGED, 'Only output changed styles:');
    this.buildCheckboxField(area, Settings.OUTPUT_UNIQUE, 'Exclude styles common to a group:');

    var save  = new Element(this.settingsArea.el, 'button', 'settings-save').html('Save');
    var reset = new Element(this.settingsArea.el, 'button', 'settings-reset').html('Clear All');
    var help  = new Element(header.el, 'span', 'settings-help-link').html('Help');

    reset.addEventListener('click', this.clearSettings.bind(this));
    save.addEventListener('click', this.saveSettings.bind(this));
    help.addEventListener('click', this.setArea.bind(this, this.helpArea));

    area.addEventListener('mousedown', this.filterClicks.bind(this));
    area.addEventListener('mouseup', this.filterClicks.bind(this));
    area.addEventListener('keydown', this.filterKeyboardInput.bind(this));
  };

  StatusBar.prototype.buildTextField = function(area, name, label, placeholder) {
    this.buildFormControl(area, name, label, function(block) {
      var input = new Element(block.el, 'input', 'setting-input setting-text-input');
      input.el.type = 'text';
      input.el.placeholder = placeholder;
      input.el.value = settings.get(name);
      this.inputs.push(input);
      return input;
    });
  };

  StatusBar.prototype.buildCheckboxField = function(area, name, label) {
    this.buildFormControl(area, name, label, function(block) {
      var input = new Element(block.el, 'input', 'setting-input setting-text-input');
      input.el.type = 'checkbox';
      input.el.checked = !!settings.get(name);
      this.inputs.push(input);
      return input;
    });
  };

  StatusBar.prototype.buildSelect = function(area, name, label, options) {
    var select;
    this.buildFormControl(area, name, label, function(block) {
      select = new Element(block.el, 'select', 'setting-input');
      if (options[0].length > 2) {
        // Associated descriptions exist so create the elements
        this[name + 'Description'] = new Element(block.el, 'div', 'setting-description');
        this[name + 'Example'] = new Element(block.el, 'div', 'setting-example');
      }
      options.forEach(function(o) {
        var option = new Element(select.el, 'option', 'setting-option');
        option.el.value = o[0];
        option.el.textContent = o[1];
        if (o[2]) {
          option.el.dataset.description = o[2];
          option.el.dataset.example = o[3];
        }
        if (settings.get(name) === option.el.value) {
          option.el.selected = true;
        }
      });
      return select;
    });
    this.checkLinkedDescription(select.el);
  };

  StatusBar.prototype.buildFormControl = function(area, name, label, fn) {
    var field = new Element(area.el, 'fieldset', 'setting-field');
    var label = new Element(field.el, 'label', 'setting-label').html(label);
    var block = new Element(field.el, 'div', 'setting-block');
    var input = fn.call(this, block);
    input.id('setting-' + name);
    input.el.name = name;
    label.el.htmlFor = input.el.id;
    input.el.dataset.name = name;
    input.addEventListener('change', this.inputChanged.bind(this));
  };

  StatusBar.prototype.setFormControl = function(control) {
    var el = control.el;
    var value = settings.get(el.name);
    if (el.type === 'checkbox') {
      el.checked = value;
    } else {
      el.value = value;
    }
  }

  StatusBar.prototype.createState = function(name, text, iconId) {
    var state = new Element(this.elementStates.el, 'div', 'element-state ' + name + '-state');
    state.name = name;
    new IconElement(state.el, iconId, 'element-state-icon');
    new Element(state.el, 'p', 'element-state-text').html(text);
    this.stateIcons.push(state);
  };

-->

  <!--

  static get TABS()              { return 'tabs';              }
  static get OUTPUT()            { return 'output';            }
  static get SELECTOR()          { return 'selector';          }
  static get INCLUDE_ELEMENTS()  { return 'include-elements';  }
  static get EXCLUDE_ELEMENTS()  { return 'exclude-elements';  }
  static get DOWNLOAD_FILENAME() { return 'download-filename'; }

  static get SELECTOR_ID()      { return 'id';      }
  static get SELECTOR_ALL()     { return 'all';     }
  static get SELECTOR_TAG()     { return 'tag';     }
  static get SELECTOR_TAG_NTH() { return 'tag-nth'; }
  static get SELECTOR_AUTO()    { return 'auto';    }
  static get SELECTOR_FIRST()   { return 'first';   }
  static get SELECTOR_NONE()    { return 'inline';  }
  static get SELECTOR_LONGEST() { return 'longest'; }

  static get OUTPUT_UNIQUE()  { return 'unique';  }
  static get OUTPUT_CHANGED() { return 'changed'; }

  static get TABS_TWO_SPACES()  { return 'two';  }
  static get TABS_FOUR_SPACES() { return 'four'; }
  static get TABS_TAB()         { return 'tab';  }

  static get SKIP_GETTING_STARTED() { return 'skip-getting-started'; }



//     this.buildArea('Settings');
// 
//     var header = new Element(this.settingsArea.el, 'h4', 'settings-header').html('Settings');
// 
//     this.buildTextField(area, Settings.DOWNLOAD_FILENAME, 'Filename when saving:', 'filename');
//     this.buildTextField(area, Settings.EXCLUDE_ELEMENTS, 'Exclude elements matching:', 'CSS Selector');
//     this.buildTextField(area, Settings.INCLUDE_ELEMENTS, 'Include elements matching:', 'CSS Selector');
// 
//     this.buildSelect(area, Settings.TABS, 'Tab style:', [
//       [Settings.TABS_TAB, 'Tab'],
//       [Settings.TABS_TWO_SPACES, 'Two Spaces'],
//       [Settings.TABS_FOUR_SPACES, 'Four Spaces']
//     ]);
// 
//     this.buildSelect(area, Settings.SELECTOR, 'Output Selector:', [
//       [Settings.SELECTOR_AUTO, 'Auto', 'Element id or first class will be used', '#id | .first { ... }'],
//       [Settings.SELECTOR_NONE, 'None', 'No selector used. Styles will be inline.', 'width: 200px; height: 200px;...'],
//       [Settings.SELECTOR_ID, 'Id', 'Element id will be used', '#id { ... }'],
//       [Settings.SELECTOR_FIRST, 'First Class', 'First class name found will be used', '.first { ... }'],
//       [Settings.SELECTOR_LONGEST, 'Longest Class', 'Longest class name found will be used', '.long-class-name { ... }'],
//       [Settings.SELECTOR_ALL, 'All Classes', 'All class names will be output together', '.one.two.three { ... }'],
//       [Settings.SELECTOR_TAG, 'Tag', 'Only the tag name will be output', 'section { ... }'],
//       [Settings.SELECTOR_TAG_NTH, 'Tag:nth-child', 'The tag name + tag\'s nth-child selector will be output', 'li:nth-child(3) { ... }'],
//     ]);
// 
//     this.buildCheckboxField(area, Settings.OUTPUT_CHANGED, 'Only output changed styles:');
//     this.buildCheckboxField(area, Settings.OUTPUT_UNIQUE, 'Exclude styles common to a group:');
// 
//     var save  = new Element(this.settingsArea.el, 'button', 'settings-save').html('Save');
//     var reset = new Element(this.settingsArea.el, 'button', 'settings-reset').html('Reset All');
//     var help  = new Element(header.el, 'span', 'settings-help-link').html('Help');
// 
//     reset.addEventListener('click', this.clearSettings.bind(this));
//     save.addEventListener('click', this.saveSettings.bind(this));
//     help.addEventListener('click', this.setArea.bind(this, this.helpArea));
// 
//     area.addEventListener('mousedown', this.filterClicks.bind(this));
//     area.addEventListener('mouseup', this.filterClicks.bind(this));
//     area.addEventListener('keydown', this.filterKeyboardInput.bind(this));
//   }
// 
//   buildTextField(area, name, label, placeholder) {
//     this.buildFormControl(area, name, label, function(block) {
//       var input = new Element(block.el, 'input', 'setting-input setting-text-input');
//       input.el.type = 'text';
//       input.el.placeholder = placeholder;
//       input.el.value = this.settings.get(name);
//       this.inputs.push(input);
//       return input;
//     });
//   }
// 
//   buildCheckboxField(area, name, label) {
//     this.buildFormControl(area, name, label, function(block) {
//       var input = new Element(block.el, 'input', 'setting-input setting-text-input');
//       input.el.type = 'checkbox';
//       input.el.checked = !!this.settings.get(name);
//       this.inputs.push(input);
//       return input;
//     });
//   }
// 
//   buildSelect(area, name, label, options) {
//     var select;
//     this.buildFormControl(area, name, label, function(block) {
//       select = new Element(block.el, 'select', 'setting-input');
//       if (options[0].length > 2) {
//         // Associated descriptions exist so create the elements
//         this[name + 'Description'] = new Element(block.el, 'div', 'setting-description');
//         this[name + 'Example'] = new Element(block.el, 'div', 'setting-example');
//       }
//       options.forEach(function(o) {
//         var option = new Element(select.el, 'option', 'setting-option');
//         option.el.value = o[0];
//         option.el.textContent = o[1];
//         if (o[2]) {
//           option.el.dataset.description = o[2];
//           option.el.dataset.example = o[3];
//         }
//         if (this.settings.get(name) === option.el.value) {
//           option.el.selected = true;
//         }
//       }, this);
//       return select;
//     });
//     this.checkLinkedDescription(select.el);
//   }
// 
//   buildFormControl(area, name, label, fn) {
//     var field = new Element(area.el, 'fieldset', 'setting-field');
//     var label = new Element(field.el, 'label', 'setting-label').html(label);
//     var block = new Element(field.el, 'div', 'setting-block');
//     var input = fn.call(this, block);
//     input.el.id = 'setting-' + name;
//     input.el.name = name;
//     label.el.htmlFor = input.el.id;
//     input.el.dataset.name = name;
//     input.addEventListener('change', this.inputChanged.bind(this));
//   }
// 
//   setFormControl(control) {
//     var el = control.el;
//     var value = this.settings.get(el.name);
//     if (el.type === 'checkbox') {
//       el.checked = value;
//     } else {
//       el.value = value;
//     }
//   }
// 
//   createState(name, text, iconId) {


-->










